<h1>Editing project</h1>

<% form_for(@project, :html => { :multipart => true }) do |f| %>
  <%= f.error_messages %>

  <p>
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </p>
  <p>
    <%= f.label :description %><br />
    <%= f.text_area :description %><br/>
    Thumb <%= f.file_field :thumb %>
    </p>
<h2>Photos</h2>
<% @project.attached_photos.each do |photo| %>
  <div>
    <b>Photo file name:</b>
    <%=h photo.photo_file_name %><br>
    <% if photo.photo.exists? then %>
      <%= photo.id %>
      <%= image_tag photo.photo.url %>
      <%= link_to 'Delete', project_attached_photo_path(@project, photo), :method => :delete, :confirm => "Are you sure?"%>
    <% else %>
       There are no photo's attached, upload one.
    <% end %>
  </div>
  

    <hr />
<% end %>

<%= link_to 'New Photo', new_project_attached_photo_path(@project) %>
<br />
  
  <%= collection_select(:project, :author_id, User.all, :id, :name, options ={:prompt => "-Select author"}) %>
  
  <p>
    <%= f.label :date %><br />
    <%= f.date_select :date %>
  </p>
  <p>
    <%= f.submit 'Update' %>
  </p>
<% end %>

<%= link_to 'Show', @project %> |
<%= link_to 'Back', projects_path %>